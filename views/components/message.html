{% set role = request.blueprint.split('.')[0][:-3] %}
<section style="background-color: #eee;">
    <div class="container py-5">
        <div class="card">
            <div class="card-body" data-mdb-perfect-scrollbar="true"  id="boxChat" style="position: relative; overflow-y: auto; height: 70vh;">
                {% for log in data["log"] %}
                {% if log["employee_id"] == data["employee_id"] %}
                <div class="d-flex justify-content-end">
                    <p class="small mb-1">{{log["time"]}}</p>
                </div>
                <div class="d-flex flex-row justify-content-end mb-4 pt-1">
                    <div>
                        <p class="small p-2 me-3 mb-3 text-white rounded-3 bg-warning">
                            {{log["message"]}}
                        </p>
                    </div>
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
                        alt="avatar 1" style="width: 45px; height: 100%;">
                </div>

                {% else %}
                <div class="d-flex">
                    <p class="small mb-1">{{log["fname"]}} | {{log["time"]}}</p>
                </div>
                <div class="d-flex flex-row justify-content-start">
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava5-bg.webp"
                        alt="avatar 1" style="width: 45px; height: 100%;">
                    <div>
                        <p class="small p-2 ms-3 mb-3 rounded-3" style="background-color: #f5f6f7;">
                            {{log["message"]}}
                        </p>
                    </div>
                </div>

                {% endif %}
                {% endfor %}
                <div class="card-footer text-muted d-flex justify-content-end align-items-center p-3">
                    <form action="{{request.path}}" method="post">
                        <div class="input-group mb-0">
                            <input type="text" name="message" class="form-control" placeholder="Tin nhắn chat" required pattern=".{1,}"/>
                            <input class="btn btn-primary" type="submit"
                                style="padding-top: .55rem;" value="Gửi">
                        </div>
                    </form>
                </div>
            </div>

        </div>
</section>
<script>
    const messages = document.getElementById('boxChat');
    messages.scrollTop = messages.scrollHeight;
</script>